<% provide(:title, "All recipes") %>
<%= render 'layouts/userheader' %>

<div class="container">
  <div class="row">
    <%= render 'layouts/userleftnav' %>
    <div class="span8">

      <b> Recipes </b></br>
      <table class="table table-striped"  >
        <thead>
        <tr>
          <th>Name</th>
          <th>Serves</th>
          <th>Time</th>
          <th></th>
          <th></th>
         </tr>
        </thead>
        <tbody>
        <% @recipes.each do |rp| %>
            <tr>
            <td style="overflow: hidden"><%=  rp.name  %></td>
            <td><%= rp.quantity.to_s %></td>
            <% preptime=rp.presteps.pluck(:time).sum %>
            <% steptime=rp.steps.pluck(:time).sum %>
            <td><%= preptime+steptime %></td>
            <td><%= link_to 'View/Edit ', rp %></td>
            <td><%= link_to 'Destroy', rp, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            </tr>
        <% end %>
        </tbody>
      </table>

<%= will_paginate %>
<% if !params[:nolayout] %>
      <%= link_to  "Add new", new_recipe_path  %>

    </div>
  </div>
</div>

<%end%>


